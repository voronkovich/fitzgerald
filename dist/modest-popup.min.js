var ModestPopup=(()=>{var u=Object.defineProperty;var $=Object.prototype.hasOwnProperty;var f=Object.getOwnPropertySymbols,B=Object.prototype.propertyIsEnumerable;var d=(t,e,r)=>e in t?u(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,a=(t,e)=>{for(var r in e||(e={}))$.call(e,r)&&d(t,r,e[r]);if(f)for(var r of f(e))B.call(e,r)&&d(t,r,e[r]);return t};var F=(t,e)=>{for(var r in e)u(t,r,{get:e[r],enumerable:!0})};var W={};F(W,{default:()=>G,modal:()=>M,plugin:()=>_});var l=class{constructor(){this.plugins=new Map}get(e){return this.plugins.get(e)}add(e){typeof e=="function"&&(e={key:Symbol(),callable:e,lazy:!1});let{key:r,callable:n,lazy:o=!0}=e;if(!r||!["string","symbol"].includes(typeof r))throw Error("Plugin key must be not empty string or symbol.");if(!n||typeof n!="function")throw Error(`Plugin "${r}" must have callable.`);return this.plugins.set(r,Object.freeze({key:r,callable:n,lazy:o}))}has(e){return this.plugins.has(e)}keys(){return this.plugins.keys()}all(){return this.plugins.values()}},p=(t,e,r={})=>{let n=Object.keys(r);n.forEach(o=>{if(!t.has(o))throw Error(`Plugin "${o}" is not defined.`)});for(let{key:o,callable:i,lazy:s}of t.all())s&&!n.includes(o)||i(e,r[o])};var y=()=>{let t=new Map;return Object.freeze({on(e,r){let n=t.get(e);n&&n.push(r)||t.set(e,[r])},off(e,r){let n=t.get(e);n&&n.splice(n.indexOf(r)>>>0,1)},async emit(e,r){let n=t.get(e)||[];return Promise.allSettled(n.map(o=>o(r)))}})};var h=(t=[])=>{let e=new l,r=o=>{e.add(o)};return t.forEach(r),Object.freeze({modal:(o={})=>{(typeof o=="string"||o instanceof Node)&&(o={content:o});let i=R();return p(e,i,o),Object.freeze(i),i},plugin:r})},R=()=>{let t=H(),e=N(),r=q();t.append(e,r);let n=y(),o=a(a({root:t,backdrop:e,content:r},n),{show:async()=>o.isVisible()?Promise.resolve():n.emit("show:before").then(()=>(o.root.style.visibility="visible",n.emit("show"))),hide:async()=>o.isHidden()?Promise.resolve():n.emit("hide:before").then(()=>(o.root.style.visibility="hidden",n.emit("hide"))),isVisible:()=>o.root.style.visibility==="visible",isHidden:()=>o.root.style.visibility==="hidden",destroy:()=>{t.remove()}});return o},H=()=>{let t=document.createElement("div");return t.className="modest-popup",Object.assign(t.style,{zIndex:D()+1,visibility:"hidden"}),t},N=()=>{let t=document.createElement("div");return t.className="modest-popup-backdrop",t},q=()=>{let t=document.createElement("div");return t.className="modest-popup-content",t},D=()=>Array.from(document.querySelectorAll("*")).reduce((t,e)=>{let r=+getComputedStyle(e).zIndex||0;return Math.max(t,r)},0);var m=(t,e)=>{e!==!1&&fetch(e).then(r=>r.text()).then(r=>{t.content.innerHTML=r})};var v=(t,e)=>{if(e!==!1)for(let[r,n]of Object.entries(e)){let o=t[r];if(!o)throw Error(`Animation object "${r}" not exists.`);if(n.show){let i=n.show.split(/\s/);t.on("show",()=>(b(o,i),g(o)))}if(n.hide){let i=n.hide.split(/\s/);t.on("hide:before",()=>(b(o,i),g(o)))}}},b=(t,e)=>{t.classList.add(...e),t.addEventListener("animationend",()=>{t.classList.remove(...e)},{once:!0})},g=async t=>t.getAnimations?Promise.allSettled(t.getAnimations().map(e=>e.finished)):new Promise(e=>{let{animations:r,transitions:n}=T(t);!n&&!r&&e(),r&&t.addEventListener("animationend",()=>{r=!1,n||e()},{once:!0}),n&&t.addEventListener("transitionend",()=>{n=!1,r||e()},{once:!0})}),T=t=>{let e=getComputedStyle(t),r=parseFloat(e.animationDuration)||0,n=parseFloat(e.transitionDuration)||0;return{animations:r>0,transitions:n>0}};var x=(t,e)=>{if(e===!1)return;let r=Object.assign({role:"dialog",contentRole:"document",modal:!0,hidden:!1,label:null,labelledBySelector:"[data-modest-popup-aria-labelledby]",describedBySelector:"[data-modest-popup-aria-describedby]"},e);r.role&&t.root.setAttribute("role",r.role),r.contentRole&&(t.content.setAttribute("role",r.contentRole),r.contentRole==="document"&&(t.content.tabIndex=0)),r.modal&&t.root.setAttribute("aria-modal",!0),r.label&&t.root.setAttribute("aria-label",r.label);let n=o=>{!r.hidden||(o?t.root.setAttribute("aria-hidden",!0):t.root.removeAttribute("aria-hidden"))};n(!0),t.on("show:before",()=>{n(!1);let o=t.content.querySelector(r.labelledBySelector);o&&t.root.setAttribute("aria-labelledby",E(o));let i=t.content.querySelector(r.describedBySelector);i&&t.root.setAttribute("aria-describedby",E(i))}),t.on("hide:before",()=>{n(!0)})},V=0,E=t=>(t.id||(t.id=`modest-popup-aria-${V++}`),t.id);var k=(t,e)=>{if(e!==!1){if(!e||typeof e!="string")throw Error("Class must be not empty string.");e.split(/\s/).forEach(r=>{t.root.classList.add(r)})}};var w=(t,e)=>{e!==!1&&(t.setContent=r=>(Z(t.content,r),t),e&&t.setContent(e))},Z=(t,e)=>{if(typeof e!="undefined"){if(typeof e=="string"){t.innerHTML=e;return}if(e===null){c(t);return}if(e.content instanceof DocumentFragment){c(t,e.content.cloneNode(!0));return}c(t,e)}},c=(t,...e)=>{t.childNodes.forEach(r=>t.removeChild(r)),e.forEach(r=>t.appendChild(r))};var j=(t,e={})=>{if(e===!1)return;let r=Object.assign({focusSelector:"[data-modest-popup-focus]"},e),n,o=()=>{n=document.activeElement||document.body},i=()=>{n&&n.focus()},s=()=>t.content.querySelector(r.focusSelector)||t.content;t.content.tabIndex=-1,t.on("show",()=>{o(),s().focus()}),t.on("hide",()=>{i()})};var z=(t,e)=>{if(e===!1)return;if(typeof e!="string"||!e.startsWith("#"))throw Error('Hash must be not empty string starting with "#".');t.on("show",()=>{location.hash=e}),t.on("hide",()=>{location.hash===e&&(location.hash="")});let r=()=>{location.hash===e?t.show():t.hide()};window.addEventListener("hashchange",r),r()};var P=(t,e={})=>{if(e===!1)return;let r=Object.assign({hideSelector:"[data-modest-popup-hide]",onBackdropClick:!0,onEscape:!0},e);r.hideSelector&&t.root.addEventListener("click",n=>{n.target.closest(r.hideSelector)&&t.hide()}),r.onBackdropClick&&t.backdrop.addEventListener("click",t.hide),r.onEscape&&t.root.addEventListener("keyup",n=>{n.keyCode===27&&t.hide()})};var A=(t,e)=>{if(e!==!1){if(!e||typeof e!="string")throw Error("Id must be not empty string.");t.root.id=e}};var S=(t,e=document.body)=>{if(e===!1)return;let r=e;if(typeof e=="string"){if(r=document.querySelector(e),!r)throw Error(`Mount element "${e}" not found.`)}else if(!(e instanceof Element))throw Error('Mount element must be instance of "Element".');r.append(t.root)};var C={top:"flex-start",center:"center",bottom:"flex-end"},L={left:"flex-start",center:"center",right:"flex-end"},O=(t,e)=>{if(e!==!1){if(e.vertical){if(!C[e.vertical])throw Error(`Invalid vertical align: "${e.vertical}".`);t.root.style.setProperty("--modest-popup-align-vertical",C[e.vertical])}if(e.horizontal){if(!L[e.horizontal])throw Error(`Invalid horizontal align: "${e.horizontal}".`);t.root.style.setProperty("--modest-popup-align-horizontal",L[e.horizontal])}}};var I=(t,e)=>{if(e!==!1)for(let[r,n]of Object.entries(e)){let o=`--modest-popup-${K(r,"-")}`;t.root.style.setProperty(o,n)}},K=(t,e="_")=>t.replace(/[A-Z]/g,r=>`${e}${r.toLowerCase()}`);var{modal:M,plugin:_}=h([{key:"ajax",callable:m,lazy:!0},{key:"animate",callable:v,lazy:!0},{key:"aria",callable:x,lazy:!1},{key:"class",callable:k,lazy:!0},{key:"content",callable:w,lazy:!1},{key:"focus",callable:j,lazy:!1},{key:"hash",callable:z,lazy:!0},{key:"hide",callable:P,lazy:!1},{key:"id",callable:A,lazy:!0},{key:"mount",callable:S,lazy:!1},{key:"position",callable:O,lazy:!0},{key:"style",callable:I,lazy:!0}]),G=M;return W;})();
