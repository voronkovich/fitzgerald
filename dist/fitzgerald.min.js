var Fitz=(()=>{var S=Object.defineProperty,Q=Object.defineProperties;var U=Object.getOwnPropertyDescriptors;var z=Object.getOwnPropertySymbols;var X=Object.prototype.hasOwnProperty,ee=Object.prototype.propertyIsEnumerable;var P=(t,e,r)=>e in t?S(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,k=(t,e)=>{for(var r in e||(e={}))X.call(e,r)&&P(t,r,e[r]);if(z)for(var r of z(e))ee.call(e,r)&&P(t,r,e[r]);return t},x=(t,e)=>Q(t,U(e));var te=(t,e)=>{for(var r in e)S(t,r,{get:e[r],enumerable:!0})};var we={};te(we,{createModal:()=>J,default:()=>ve,usePlugin:()=>be});var g=class{constructor(){this.plugins=new Map}get(e){return this.plugins.get(e)}add(e){typeof e=="function"&&(e={key:Symbol(),callable:e,lazy:!1});let{key:r,callable:n,lazy:o=!0}=e;if(!r||!["string","symbol"].includes(typeof r))throw Error("Plugin key must be not empty string or symbol.");if(!n||typeof n!="function")throw Error(`Plugin "${r}" must have callable.`);return this.plugins.set(r,Object.freeze({key:r,callable:n,lazy:o}))}has(e){return this.plugins.has(e)}keys(){return this.plugins.keys()}all(){return this.plugins.values()}},j=(t,e,r={})=>{let n=Object.keys(r);n.forEach(o=>{if(!t.has(o))throw Error(`Plugin "${o}" is not defined.`)});for(let{key:o,callable:i,lazy:l}of t.all())l&&!n.includes(o)||i(e,r[o])};var L=()=>{let t=new Map;return Object.freeze({on(e,r){let n=t.get(e);n&&n.push(r)||t.set(e,[r])},off(e,r){let n=t.get(e);n&&n.splice(n.indexOf(r)>>>0,1)},async emit(e,r){let n=t.get(e)||[];return Promise.allSettled(n.map(o=>o(r)))}})};var A=(t=[])=>{let e=new g,r=o=>{e.add(o)},n=(o={})=>{(typeof o=="string"||o instanceof Node)&&(o={content:o});let i=re();return j(e,i,o),Object.freeze(i),i};return t.forEach(r),Object.freeze({createModal:n,usePlugin:r})},re=()=>{let t=document.createElement("div");t.className="fitz";let e=document.createElement("div");e.className="fitz-backdrop";let r=document.createElement("div");r.className="fitz-container";let n=document.createElement("div");n.className="fitz-wrapper";let o=document.createElement("div");o.className="fitz-content",n.append(o),r.append(n),t.append(e,r);let i=L(),l=null,c=null,u=null,s=x(k({root:t,backdrop:e,container:r,wrapper:n,content:o},i),{show:()=>s.isDestroyed()?Promise.reject(Error("Modal is destroyed.")):c?Promise.reject(Error("Hiding process is not completed.")):l||(s.isVisible()?Promise.resolve():(l=i.emit("show:before").then(()=>(s.root.classList.add("fitz-visible"),i.emit("show").then(()=>i.emit("show:after")))).finally(()=>{l=null}),l)),hide:()=>s.isDestroyed()?Promise.reject(Error("Modal is destroyed.")):l?Promise.reject(Error("Showing process is not completed.")):c||(s.isHidden()?Promise.resolve():(s.root.classList.add("fitz-hiding"),c=i.emit("hide:before").then(()=>(s.root.classList.remove("fitz-visible","fitz-hiding"),i.emit("hide"))).finally(()=>{c=null}),c)),isVisible:()=>s.root.classList.contains("fitz-visible"),isHidden:()=>!s.isVisible(),isDestroyed:()=>!!u,destroy:()=>u||(u=i.emit("destroy"),u)});return s};var f=t=>{if(Array.isArray(t))return t;if(typeof t!="string")throw Error(`Invalid CSS classes list type: "${typeof t}". Only strings and arrays allowed.`);return t.trim().split(/\s+/)};var C=(t,e)=>{if(e===!1)return;let r=[t.root,t.backdrop,t.content];if(t.on("hide:before",()=>Promise.allSettled(r.map(h))),typeof e=="object")for(let[n,o]of Object.entries(e))o.show&&ne(t,n,o.show),o.hide&&oe(t,n,o.hide)},ne=(t,e,r)=>{r=f(r),t.on("show",()=>{let n=t[e]||t.root.querySelector(e);if(!!n)return n.classList.add(...r),h(n)}),t.on("hide:before",()=>{let n=t[e]||t.root.querySelector(e);if(!!n)return n.classList.remove(...r),h(n)})},oe=(t,e,r)=>{r=f(r),t.on("hide:before",()=>{let n=t[e]||t.root.querySelector(e);if(!!n)return n.classList.add(...r),h(n).finally(()=>{n.classList.remove(...r)})})},h=async t=>t.getAnimations?Promise.allSettled(t.getAnimations().map(e=>e.finished)):new Promise(e=>{let r=getComputedStyle(t),n=parseFloat(r.animationDuration)||0,o=parseFloat(r.transitionDuration)||0;setTimeout(e,1e3*Math.max(n,o));let i=n>0,l=o>0;!l&&!i&&e(),i&&t.addEventListener("animationend",()=>{i=!1,l||e()},{once:!0}),l&&t.addEventListener("transitionend",()=>{l=!1,i||e()},{once:!0})});var T=(t,e)=>{if(e===!1)return;let r=Object.assign({role:"dialog",label:null,labelledBy:"[data-fitz-aria-labelledby]",describedBy:"[data-fitz-aria-describedby]"},e);t.content.setAttribute("aria-modal",!0),r.role&&t.content.setAttribute("role",r.role),r.label&&t.content.setAttribute("aria-label",r.label),t.on("show:before",()=>{let n=t.content.querySelector(r.labelledBy);n&&t.content.setAttribute("aria-labelledby",M(n));let o=t.content.querySelector(r.describedBy);o&&t.content.setAttribute("aria-describedby",M(o))})},ie=0,M=t=>(t.id||(t.id=`fitz-aria-${ie++}`),t.id);var B=(t,e)=>{e!==!1&&(typeof e=="string"&&(e={root:e}),Object.entries(e).forEach(r=>{let[n,o]=r,i=t[n];if(!i)throw Error(`Couldn't set class for "${n}" element because it not exists.`);f(o).forEach(l=>{i.classList.add(l)})}))};var D=(t,e)=>{e!==!1&&(t.setContent=r=>(le(t.content,r),t),e&&t.setContent(e))},le=(t,e)=>{if(typeof e=="undefined"||e===null){b(t);return}if(typeof e=="string"){t.innerHTML=e;return}if(e.content instanceof DocumentFragment){b(t,e.content.cloneNode(!0));return}b(t,e)},b=(t,...e)=>{for(;t.firstChild;)t.removeChild(t.firstChild);e.forEach(r=>t.appendChild(r))};var O=(t,e="[data-fitz-focus]")=>{if(e===!1)return;t.content.tabIndex=-1;let r=(i=e)=>{if(i instanceof HTMLElement)return i;if(typeof i=="string"){let l=t.content.querySelector(i);if(l)return l}return t.content};t.setFocus=i=>{r(i).focus()};let n=()=>{},o=()=>{};t.on("show",()=>{n=se(),o=ae(t.content)}),t.on("show:after",t.setFocus),t.on("hide",()=>{n(),o()})},se=()=>{let t=document.activeElement;return()=>{document.activeElement&&document.activeElement.blur(),t&&t.focus()}},ae=t=>{let e=r=>{if(r.key!=="Tab")return;let n=ce(t);if(n.length===0){r.preventDefault();return}let o=n[0],i=n[n.length-1];r.shiftKey?document.activeElement===o&&(i.focus(),r.preventDefault()):document.activeElement===i&&(o.focus(),r.preventDefault())};return t.addEventListener("keydown",e),()=>{t.removeEventListener("keydown",e)}},ce=t=>t.querySelectorAll(ue),ue=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden])","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'].join(",");var I=(t,e)=>{if(e===!1)return;if(typeof e!="string"||!e.startsWith("#"))throw Error('Hash must be not empty string starting with "#".');t.on("show",()=>{location.hash=e}),t.on("hide",()=>{location.hash===e&&(location.hash="")});let r=()=>{location.hash===e?t.show():t.hide()};window.addEventListener("hashchange",r),t.on("destroy",()=>{window.removeEventListener("hashchange",r)}),setTimeout(r,0)};var H=(t,e)=>{if(e===!1)return;typeof e=="string"&&(e={click:e});let r=Object.assign({click:"[data-fitz-hide]",backdrop:!0,escape:!0},e);r.click&&t.root.addEventListener("click",n=>{n.target.closest(r.click)&&t.hide()}),r.backdrop&&t.root.addEventListener("click",n=>{t.content.contains(n.target)||t.hide()}),r.escape&&t.root.addEventListener("keyup",n=>{(n.key==="Escape"||n.key==="Esc")&&t.hide()})};var $=(t,e)=>{if(e!==!1){if(!e||typeof e!="string")throw Error('An "id" must be not empty string.');t.root.id=e}};function fe(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}else return Array.from(t)}var v=!1;typeof window!="undefined"&&(w={get passive(){v=!0}},window.addEventListener("testPassive",null,w),window.removeEventListener("testPassive",null,w));var w,q=typeof window!="undefined"&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||window.navigator.platform==="MacIntel"&&window.navigator.maxTouchPoints>1),a=[],p=!1,F=-1,d=void 0,y=void 0,N=function(e){return a.some(function(r){return!!(r.options.allowTouchMove&&r.options.allowTouchMove(e))})},m=function(e){var r=e||window.event;return N(r.target)||r.touches.length>1?!0:(r.preventDefault&&r.preventDefault(),!1)},de=function(e){if(y===void 0){var r=!!e&&e.reserveScrollBarGap===!0,n=window.innerWidth-document.documentElement.clientWidth;r&&n>0&&(y=document.body.style.paddingRight,document.body.style.paddingRight=n+"px")}d===void 0&&(d=document.body.style.overflow,document.body.style.overflow="hidden")},ye=function(){y!==void 0&&(document.body.style.paddingRight=y,y=void 0),d!==void 0&&(document.body.style.overflow=d,d=void 0)},he=function(e){return e?e.scrollHeight-e.scrollTop<=e.clientHeight:!1},pe=function(e,r){var n=e.targetTouches[0].clientY-F;return N(e.target)?!1:r&&r.scrollTop===0&&n>0||he(r)&&n<0?m(e):(e.stopPropagation(),!0)},R=function(e,r){if(!e){console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.");return}if(!a.some(function(o){return o.targetElement===e})){var n={targetElement:e,options:r||{}};a=[].concat(fe(a),[n]),q?(e.ontouchstart=function(o){o.targetTouches.length===1&&(F=o.targetTouches[0].clientY)},e.ontouchmove=function(o){o.targetTouches.length===1&&pe(o,e)},p||(document.addEventListener("touchmove",m,v?{passive:!1}:void 0),p=!0)):de(r)}};var E=function(e){if(!e){console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.");return}a=a.filter(function(r){return r.targetElement!==e}),q?(e.ontouchstart=null,e.ontouchmove=null,p&&a.length===0&&(document.removeEventListener("touchmove",m,v?{passive:!1}:void 0),p=!1)):a.length||ye()};var Y=(t,e="[data-fitz-lock-scroll]")=>{if(e===!1)return;let r=()=>{if(e instanceof HTMLElement)return e;if(typeof e=="string"){let n=t.root.querySelector(e);if(n)return n}return t.container};t.on("show",()=>{R(r())}),t.on("hide",()=>{E(r())}),t.on("destroy",()=>{E(r())})};var V=(t,e=document.body)=>{if(e===!1)return;let r=e;if(typeof e=="string"){if(r=document.querySelector(e),!r)throw Error(`Mount element "${e}" not found.`)}else if(!(e instanceof Element))throw Error('Mount element must be instance of "Element".');r.append(t.root),t.on("destroy",()=>{t.root.remove()})};var W=(t,e)=>{if(e!==!1){if(e.vertical){if(!K[e.vertical])throw Error(`Invalid vertical position: "${e.vertical}".`);t.root.style.setProperty("--fitz-position-vertical",K[e.vertical])}if(e.horizontal){if(!Z[e.horizontal])throw Error(`Invalid horizontal position: "${e.horizontal}".`);t.root.style.setProperty("--fitz-position-horizontal",Z[e.horizontal])}}},K={top:"flex-start",center:"center",bottom:"flex-end"},Z={left:"flex-start",center:"center",right:"flex-end"};var _=(t,e)=>{if(e!==!1)for(let[r,n]of Object.entries(e)){let o=`--fitz-${me(r,"-")}`;t.root.style.setProperty(o,n)}},me=(t,e="_")=>t.replace(/[A-Z]/g,r=>`${e}${r.toLowerCase()}`);var G=(t,e)=>{if(e!==!1){if(typeof e=="undefined"){t.root.style.zIndex=ge()+1;return}if(Number.isInteger(e)||e==="auto"){t.root.style.zIndex=e;return}throw Error(`Invalid z-index value: "${e}".`)}},ge=()=>Array.from(document.querySelectorAll("*")).reduce((t,e)=>{let r=+getComputedStyle(e).zIndex||0;return Math.max(t,r)},0);var{createModal:J,usePlugin:be}=A([{key:"animate",callable:C,lazy:!1},{key:"aria",callable:T,lazy:!1},{key:"class",callable:B,lazy:!0},{key:"content",callable:D,lazy:!1},{key:"focus",callable:O,lazy:!1},{key:"hash",callable:I,lazy:!0},{key:"hide",callable:H,lazy:!1},{key:"id",callable:$,lazy:!0},{key:"lockScroll",callable:Y,lazy:!1},{key:"mount",callable:V,lazy:!1},{key:"position",callable:W,lazy:!0},{key:"style",callable:_,lazy:!0},{key:"zIndex",callable:G,lazy:!1}]),ve=J;return we;})();
